define("WoltLabSuite/Core/Conversation/Ui/Participant/Add",["Ajax","Language","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Ui/ItemList/User"],function(t,e,i,a,n){"use strict";function s(t){this.init(t)}return s.prototype={init:function(e){this._conversationId=e,t.api(this,{actionName:"getAddParticipantsForm"})},_ajaxSetup:function(){return{data:{className:"wcf\\data\\conversation\\ConversationAction",objectIDs:[this._conversationId]}}},_ajaxSuccess:function(t){switch(t.actionName){case"addParticipants":this._handleResponse(t);break;case"getAddParticipantsForm":this._render(t)}},_handleResponse:function(t){t.returnValues.count&&a.show(t.returnValues.successMessage,window.location.reload.bind(window.location)),i.close(this)},_render:function(t){i.open(this,t.returnValues.template);var e=document.getElementById("addParticipants");e.disabled=!0,n.init("participantsInput",{callbackChange:function(t,i){e.disabled=0===i.length},excludedSearchValues:t.returnValues.excludedSearchValues,maxItems:t.returnValues.maxItems}),e.addEventListener("click",this._submit.bind(this))},_submit:function(){for(var e=n.getValues("participantsInput"),i=[],a=0,s=e.length;a<s;a++)i.push(e[a].value);t.api(this,{actionName:"addParticipants",parameters:{participants:i}})},_dialogSetup:function(){return{id:"conversationAddParticipants",options:{title:e.get("wcf.conversation.edit.addParticipants")},source:null}}},s});